(this.webpackJsonpwowbgcalc=this.webpackJsonpwowbgcalc||[]).push([[0],{17:function(e,t,i){},18:function(e,t,i){},19:function(e,t,i){},20:function(e,t,i){},21:function(e,t,i){"use strict";i.r(t);var r=i(0),s=i(1),n=i.n(s),l=i(8),a=i.n(l),c=(i(17),i(5)),o=i(3),u=i(4),h=i(2),d=i(11),v=i(9),b=(i(18),function(){function e(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;Object(u.a)(this,e),this.color=t,this.value=i,this.faces=8,this.id=e._generateId(),this.isSelected=!1,this.isHit=!1}return Object(h.a)(e,null,[{key:"_generateId",value:function(){return e._count++,e._count-1}},{key:"compare",value:function(t,i){var r=function(t){switch(t){case e.Colors.BLUE:return 0;case e.Colors.RED:return 1;case e.Colors.GREEN:return 2;default:throw new Error("Die has no color!")}},s=r(t.color)-r(i.color);return 0===s?i.value-t.value:s}}]),Object(h.a)(e,[{key:"roll",value:function(){var e=Math.ceil(Math.random()*this.faces);this.value=e}}]),e}());b.Colors={BLUE:"blue",RED:"red",GREEN:"green"},b._count=0;var f=b,j=i(10);i(19);var O=function(e){var t=Object(s.useState)(!1),i=Object(j.a)(t,2),n=i[0],l=i[1],a=Object(s.useRef)();Object(s.useEffect)((function(){return e.rollEvent.subscribe(a,(function(){l(!0)})),function(){return e.rollEvent.unsubscribe(a)}}));var c=" "+e.die.color;return e.die.isSelected?c+=" disabled":e.die.isHit&&(c+=" glow"),n&&(c+=" roll"),Object(r.jsx)("div",{ref:a,className:"Die"+c,onClick:function(){return e.onClick()},onAnimationEnd:function(){return l(!1)},children:e.die.value})};i(20);var m=function(e){function t(){return Object(r.jsxs)("div",{className:"DiceList-buttons",children:[Object(r.jsx)("button",{onClick:function(){return e.addDie()},disabled:7===e.items.length,children:" + "}),Object(r.jsx)("button",{onClick:function(){return e.removeDie()},disabled:0===e.items.length,children:" - "})]})}return Object(r.jsxs)("div",{className:"DiceList ".concat(e.color||""),children:[e.addDie&&e.removeDie&&Object(r.jsx)(t,{}),Object(r.jsx)("ul",{children:e.items.map((function(t){return Object(r.jsx)("li",{children:Object(r.jsx)(O,{die:t,onClick:function(){return e.onDieClick(t)},rollEvent:e.rollEvent})},t.id)}))})]})},p=function(){function e(){Object(u.a)(this,e),this.subscribers=new Map}return Object(h.a)(e,[{key:"notify",value:function(){var e,t=Object(o.a)(this.subscribers.values());try{for(t.s();!(e=t.n()).done;){(0,e.value)()}}catch(i){t.e(i)}finally{t.f()}}},{key:"subscribe",value:function(e,t){this.subscribers.set(e,t)}},{key:"unsubscribe",value:function(e){this.subscribers.delete(e)}}]),e}(),y=function(e){Object(d.a)(i,e);var t=Object(v.a)(i);function i(e){var r;return Object(u.a)(this,i),(r=t.call(this,e)).state={listBlue:Array(0),listRed:Array(0),listGreen:Array(0),listReroll:Array(0),rollEvent:new p,rerollEvent:new p},r}return Object(h.a)(i,[{key:"render",value:function(){var e=this;return Object(r.jsx)("div",{className:"App",children:Object(r.jsxs)("div",{className:"App-page",children:[Object(r.jsx)("div",{className:"input-field",children:Object(r.jsxs)("label",{htmlFor:"threat",children:["Minaccia:",Object(r.jsx)("input",{id:"threat",type:"number",onChange:function(t){return e.onThreatChange(t)},min:"0",max:"8"})]})}),Object(r.jsxs)("div",{className:"App-dice",children:[[this.state.listBlue,this.state.listRed,this.state.listGreen].map((function(t,i){var s=[f.Colors.BLUE,f.Colors.RED,f.Colors.GREEN][i];return Object(r.jsx)(m,{items:t,addDie:function(){return e.addDie(t,s)},removeDie:function(){return e.removeDie(t)},onDieClick:function(t){return e.selectDie(t)},color:s,rollEvent:e.state.rollEvent})})),Object(r.jsx)("button",{className:"rollbtn",onClick:function(){e.roll(),e.state.rollEvent.notify()},children:" Tira i dadi "})]}),this.state.listReroll.length>0&&Object(r.jsxs)("div",{className:"App-reroll",children:[Object(r.jsx)(m,{items:this.state.listReroll,onDieClick:function(t){return e.deselectDie(t)},rollEvent:this.state.rerollEvent}),Object(r.jsx)("button",{className:"rollbtn",onClick:function(){e.reroll(),e.state.rerollEvent.notify()},children:" Nuovo Tiro "})]}),Object(r.jsxs)("p",{children:["Per aggiungere dadi al ",Object(r.jsx)("b",{children:"Nuovo Tiro"})," toccali. ",Object(r.jsx)("br",{}),"Per rimuovere dadi dal ",Object(r.jsx)("b",{children:"Nuovo Tiro"})," toccali prima di ritirarli. ",Object(r.jsx)("br",{}),"Quando ",Object(r.jsx)("b",{children:"Tiri i dadi"})," la coda del ",Object(r.jsx)("b",{children:"Nuovo Tiro"})," si svuota da sola. ",Object(r.jsx)("br",{})]})]})})}},{key:"addDie",value:function(e,t){7!==e.length?(e.push(new f(t)),this.forceUpdate()):console.log("lista piena!")}},{key:"removeDie",value:function(e){if(0!==e.length){var t=e.pop(),i=this.state.listReroll.slice().filter((function(e){return e.id!==t.id}));this.setState(i)}else console.log("lista vuota!")}},{key:"roll",value:function(){for(var e=[this.state.listBlue.slice(),this.state.listRed.slice(),this.state.listGreen.slice()],t=0,i=e;t<i.length;t++){var r,s=i[t],n=Object(o.a)(s);try{for(n.s();!(r=n.n()).done;){var l=r.value;l.isSelected=!1,l.roll()}}catch(u){n.e(u)}finally{n.f()}s.sort((function(e,t){return t.value-e.value}))}var a=Object(c.a)({},this.state);a.listBlue=e[0],a.listRed=e[1],a.listGreen=e[2],a.listReroll=Array(0),this.setState(a),this.checkThreat(this.state.threat)}},{key:"reroll",value:function(){var e,t=this.state.listReroll.slice(),i=Object(o.a)(t);try{for(i.s();!(e=i.n()).done;){e.value.roll()}}catch(s){i.e(s)}finally{i.f()}t.sort(f.compare);var r=Object(c.a)({},this.state);r.listReroll=t,this.setState(r),this.checkThreat(this.state.threat)}},{key:"selectDie",value:function(e){if(!e.isSelected){var t=Object.assign(new f,e),i=this.state.listReroll.slice();i.push(t),i.sort(f.compare),e.isSelected=!0;var r=Object(c.a)({},this.state);r.listReroll=i,this.setState(r)}}},{key:"deselectDie",value:function(e){for(var t=!1,i=0,r=[this.state.listBlue.slice(),this.state.listRed.slice(),this.state.listGreen.slice()];i<r.length;i++){var s,n=r[i],l=Object(o.a)(n);try{for(l.s();!(s=l.n()).done;){var a=s.value;if(a.id===e.id){if(t=!0,a.isSelected||alert("Il programmatore non \xe8 capace pt2 :'("),a.value!==e.value)return;a.isSelected=!1}}}catch(d){l.e(d)}finally{l.f()}}t||alert("Il programmatore non \xe8 capace :'(");var u=this.state.listReroll.filter((function(t){return t!==e})),h=Object(c.a)({},this.state);h.listReroll=u,this.setState(h)}},{key:"onThreatChange",value:function(e){var t=e.target.value;this.checkThreat(t);var i=Object(c.a)({},this.state);i.threat=t,this.setState(i)}},{key:"checkThreat",value:function(e){for(var t=0,i=[this.state.listBlue,this.state.listRed,this.state.listGreen,this.state.listReroll];t<i.length;t++){var r,s=i[t],n=Object(o.a)(s);try{for(n.s();!(r=n.n()).done;){var l=r.value;e>0&&l.value>e?l.isHit=!0:l.isHit=!1}}catch(a){n.e(a)}finally{n.f()}}this.forceUpdate()}}]),i}(n.a.Component),g=function(e){e&&e instanceof Function&&i.e(3).then(i.bind(null,22)).then((function(t){var i=t.getCLS,r=t.getFID,s=t.getFCP,n=t.getLCP,l=t.getTTFB;i(e),r(e),s(e),n(e),l(e)}))};a.a.render(Object(r.jsx)(n.a.StrictMode,{children:Object(r.jsx)(y,{})}),document.getElementById("root")),g()}},[[21,1,2]]]);
//# sourceMappingURL=main.24171038.chunk.js.map